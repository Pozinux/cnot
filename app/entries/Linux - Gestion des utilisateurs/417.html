<div><span style="font-size: large; font-weight: bold;">CAS 1</span></div><div><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span></div><div><font color="#ff0000">"passwd : Authentification token manipulation error"</font></div><div><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span></div><div><span style="font-weight: bold;">Centos 7</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div>J'ai booté sur un iso en rescue et j'ai monté mon environnement local dans /mnt/sysimage</div><div>Lorsque j'ai voulu changer le mot de passe :</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div><img src="data:image/png;base64,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"></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div>En fait, c'est parce que je n'ai pas chrooté mon système local donc le mot de passe que j'essaie de modifier est celui du système de l'iso qui est donc un système en lecture seul. La commande passwd n'arrive donc pas à écrire le mdp.&nbsp;</div><div>Il faut donc chrooter le système "chroot /mnt/sysimage" avant.&nbsp;</div><div>Si jamais on rencontre de nouveau l'erreur, vérifier que le système n'est pas en readonly. Il faudra donc le monter en écriture si on veut pouvoir modifier le mot de passe. Par exemple :</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div style="padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);"># mount -o remount,rw /sysroot</div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div><span style="font-size: large; font-weight: 700;">CAS 2</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div><font color="#ff0000">"sudo pam_chauthtok: Authentication token manipulation error"</font></div><div><font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></font></div><div>L'utilisateur ne tape pas le mdp "current" à la demande de changement.

</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div><span style="font-size: large; font-weight: 700;">CAS 3</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div>&nbsp;<span style="font-size: small; color: rgb(37, 37, 37); font-family: &quot;Red Hat Text&quot;, Overpass, Helvetica, sans-serif;">Le user ne peut pas changer son mot de passe alors que root peut.</span></div><div><div style="margin: 0px 0px 1rem;"></div><div style="margin: 0px 0px 1rem;"><a href="https://access.redhat.com/solutions/21693" style="background-color: white; line-height: 1.5em;"><font size="2" style="" face="Roboto">https://access.redhat.com/solutions/21693</font></a></div><div style="margin: 0px 0px 1rem;"><span style="color: rgb(37, 37, 37); font-family: &quot;Red Hat Text&quot;, Overpass, Helvetica, sans-serif; line-height: 1.5em;"><font size="2">Check permission of "passwd" command:</font></span></div><div style="position: relative;"><div style="overflow: auto; padding: 0.9375rem; margin: 0px 0px 10px; word-break: normal; overflow-wrap: normal; border: 1px solid rgb(237, 237, 237); border-radius: 0px; white-space: pre-wrap;"><div style="background-color: rgb(245, 245, 245);"><span style="border-radius: 0px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.42857;"><font size="2"># ls -l /usr/bin/passwd</font></span></div><div><span style="border-radius: 0px;"><font size="2"><span style="background-color: rgb(245, 245, 245); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.42857;">-rw</span><span style="background-color: rgb(255, 250, 165);"><span style="color: rgb(255, 0, 0); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-weight: bold; line-height: 1.42857;">s</span></span><span style="background-color: rgb(245, 245, 245); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.42857;">r-xr-x 1 root root 27768 Jul 17 2006 /usr/bin/passwd</span></font></span></div></div></div><div style="margin: 0px 0px 1rem;"><span style="color: rgb(37, 37, 37); font-family: &quot;Red Hat Text&quot;, Overpass, Helvetica, sans-serif; line-height: 1.5em;"><font size="2">If permissions are different then run this command to restore permission.</font></span></div><div style="position: relative;"><div style="overflow: auto; padding: 0.9375rem; margin: 0px 0px 10px; word-break: normal; overflow-wrap: normal; background-color: rgb(245, 245, 245); border: 1px solid rgb(237, 237, 237); border-radius: 0px; white-space: pre-wrap;"><span style="overflow: auto; word-break: normal; overflow-wrap: normal; border: 1px solid rgb(237, 237, 237); border-radius: 0px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.42857;"><font size="2"># rpm --setperms passwd</font></span></div></div><div><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></font></div></div><div><font size="2">Voir aussi -&gt;&nbsp;&nbsp;<a href="https://www.cnot.tpoz.fr/index.php?doss=Linux&amp;note=V%C3%A9rifier+que+les+droits+etc.+des+fichiers+appartenant+%C3%A0+un+package+rpm+n+ont+pas+%C3%A9t%C3%A9+modifi%C3%A9s+apr%C3%A8s+installation">Vérifier que les droits etc. des fichiers appartenant à un package rpm n ont pas été modifiés après installation</a></font></div>