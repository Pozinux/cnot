Il faut deux serveurs qui ont exactement la même version de release.<div>rsync doit être installé sur les deux serveurs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div>Les deux serveurs doivent avoir exactement la même configuration disques et filesystems</div><div>Avant de lancer le rsync, il est préférable d'arrêter tout service qui déplacent ou écrivent des données (base de données, service mail etc.</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div>Il y a des répertoires qui n'ont pas besoin d'être copiés car ils sont soient autogénérés soit existants à la destination.</div><div>Créer un fichier d'exclusions .txt contenant :</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><blockquote><font face="menlo">/boot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>/dev&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>/tmp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>/sys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>/proc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>/backup&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>/etc/fstab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>/etc/mtab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>/etc/mdadm.conf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>/etc/sysconfig/network*</font></blockquote><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div>A ajouter après clonage les lignes manquantes en FSTAB. Egalement, si on souhaite un vrai clone, il faudra modifier la conf réseau qui n'a pas été copiée.</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div>&nbsp;La commande :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div>&nbsp;</div><blockquote><font face="menlo">rsync -vPa -e 'ssh -o StrictHostKeyChecking=no' --exclude-from=/chemin/exclude-files.txt / REMOTE-IP:/</font></blockquote><div>&nbsp; &nbsp;&nbsp;</div><div>Notes TPO :&nbsp;</div><div><br></div><div>A vérifier s'il ne faut pas mettre l'option "<b>--delete</b>" qui&nbsp;va supprimer à la destination les fichiers qui n'existent pas à la source ???</div><div>Il peut être utile d'utiliser l'option "--numeric-ids" qui va garder l'ID de l'utilisateur source si l'utilisateur existe déjà à la destination avec un autre ID.</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<br></div><div>Rebooter ensuite le serveur pour recharger les changements.</div>