<div>Il est parfois utile de vouloir désactiver le fsck au reboot car si le serveur a une grosse volumétrie ça peut-être long et pénaliser la prod.</div><div><span style="font-size: 16px;">&nbsp;&nbsp;<br></span></div><div><span style="font-size: 16px;"><span style="font-weight: bold;">Centos 6</span></span></div><div>&nbsp;&nbsp;<br></div><div>Avec les FS de type EXT</div><div>&nbsp;&nbsp;<br></div><div style="padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);"><s>shutdown -rf now</s> <span style="color: rgb(255, 0, 0);">-&gt; ne fonctionne plus car l'option f est deprecated</span></div><div>&nbsp;&nbsp;<br></div><div>Par exemple, rebooter le serveur mais bypasser le fsck sur le FS "/"</div><div>&nbsp;&nbsp;<br></div><div><span style="font-weight: bold;">Passer la dernière colonne de la fstab à 0</span> (ce qui signifie ne pas faire de fsck. C'est pour cette raison que les /dev /proc etc. sont à 0 car ce ne sont pas des disques mais de la mémoire) :</div><div>&nbsp;&nbsp;<br></div><div><span style="font-weight: bold;">Note</span> : Le root filesystem doit être à 1 (ce qui signifie faire le fsck en premier) et les autres fs à 2 (donc à faire après le root).&nbsp;Ceux qui n'ont rien sont considérés comme 0. (voir man fstab). Les système ayant le même numéro sont vérifiés en parallèle.</div><div>&nbsp;&nbsp;<br></div><div><span style="font-weight: bold;">Note</span> : L'avant dernière colonne sert à indiquer si on fait un dump du FS mais je crois que ce n'est plus utilisé donc on peut laisser à 0. A vérifier.</div><div>&nbsp;&nbsp;<br></div><div style="padding: 8px; border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);"><div><span style="font-size: 11px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">[root@centos1 profile.d]# cat /etc/fstab | column -t | tail -7</span></div><div><span style="font-size: 11px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">/dev/mapper/vg_centos1-lv_root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ext4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; defaults&nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1</span></div><div><span style="font-size: 11px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">UUID=79b2edee-9893-407e-9bc7-4265abd2ee69&nbsp; /boot&nbsp; &nbsp; &nbsp; &nbsp;ext4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; defaults&nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2</span></div><div><span style="font-size: 11px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">/dev/mapper/vg_centos1-lv_swap&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;swap&nbsp; &nbsp; &nbsp; &nbsp; swap&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; defaults&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0</span></div><div><span style="font-size: 11px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /dev/shm&nbsp; &nbsp; tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;defaults&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0</span></div><div><span style="font-size: 11px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">devpts&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/dev/pts&nbsp; &nbsp; devpts&nbsp; &nbsp; &nbsp; &nbsp; gid=5,mode=620&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0</span></div><div><span style="font-size: 11px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /sys&nbsp; &nbsp; &nbsp; &nbsp; sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;defaults&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0</span></div><div><span style="font-size: 11px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">proc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/proc&nbsp; &nbsp; &nbsp; &nbsp;proc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; defaults&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0</span></div></div><div>&nbsp;&nbsp;<br></div><div>&nbsp;&nbsp;<br></div><div><span style="font-size: 16px;"><span style="font-weight: bold;">Centos 7</span></span></div><div>&nbsp;&nbsp;<br></div><div>Avec les FS de type XFS, la dernière colonne n'a pas d'importance car à chaque montage xfs_check va aller vérifier si le FS a besoin d'avoir un fsck quoi qu'il soit marqué dans la fstab.</div><div>Le man de "fsck.xfs" indique qu'il n'est pas nécessaire de fschecker un FS en XFS. Il se corrige tout seul à chaque montage (donc aussi à chaque reboot).</div><div>&nbsp;&nbsp;<br></div><div><span style="color: rgb(255, 0, 0);">Attention</span>, on peut aussi avoir du FS de type EXT sur une Centos7 !</div><div>&nbsp;&nbsp;<br></div><div>&nbsp;&nbsp;<br></div><div>&nbsp;&nbsp;<br></div>