<div style="box-sizing: inherit; border: 0px; font-size: 16px; margin: 0px 0px 24px; outline: 0px; padding: 0px; vertical-align: baseline;"><div><span style="color: rgb(0, 0, 0); font-family: &quot;Playfair Display&quot;, serif;">On peut supprimer un disque à chaud.</span></div><div><span style="color: rgb(0, 0, 0); font-family: &quot;Playfair Display&quot;, serif;">Bien sûr, il faut commencer par démonter le système de fichier qui serait dessus avec umount, et si c’est un volume LVM, il faut déplacer les blocks sur un autre PV, le retirer du VG, puis supprimer le PV, sinon vous aurez des erreurs LVM.</span></div></div><div style="box-sizing: inherit; border: 0px; font-size: 16px; margin: 0px 0px 24px; outline: 0px; padding: 0px; vertical-align: baseline;"><span style="color: rgb(0, 0, 0); font-family: &quot;Playfair Display&quot;, serif;">Si dans le processus vous avez supprimez un système de fichier, n’oubliez pas de le retirer de /etc/fstab, sans quoi votre VM se mettra en erreur au redémarrage.</span></div><div style="box-sizing: inherit; border: 0px; font-size: 16px; margin: 0px 0px 24px; outline: 0px; padding: 0px; vertical-align: baseline;"><span style="color: rgb(0, 0, 0); font-family: &quot;Playfair Display&quot;, serif;">Une fois que vous êtes sûr que votre disque virtuel a été libéré de toute contrainte, vous pouvez le supprimer de la configuration de la VM.</span></div><div style="box-sizing: inherit; border: 0px; font-size: 16px; margin: 0px 0px 24px; outline: 0px; padding: 0px; vertical-align: baseline;"><span style="color: rgb(0, 0, 0); font-family: &quot;Playfair Display&quot;, serif;">Toutefois, l’inode se référant au disque n’est pas supprimer par les vmware tools. Aussi, vous pouvez exécuter la commande suivante afin de le supprimer (dans l’exemple, pour retirer /dev/sdd):</span></div><div style="box-sizing: inherit; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: silver; border-right-color: silver; border-bottom-color: initial; border-left-color: silver; border-image: initial; font-size: 16px; margin: 0.5em 0px 0px; outline: 0px; padding: 0px; vertical-align: baseline; width: 611.516px; height: 22px; background: url(&quot;../images/arrow-square.gif&quot;) right 5px no-repeat rgb(243, 248, 215); overflow: hidden;"><span style="box-sizing: inherit; border: 0px; margin: 0px 20px 0px 0px; outline: 0px; padding: 0px 5px 0px 0px; vertical-align: baseline; float: right; text-align: right;"><span style="box-sizing: inherit; border: 0px; font-size: 12px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; height: 0px; position: relative;"><a href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples" style="font-size: 14px; vertical-align: super; border: 0px; box-sizing: inherit; margin: 0px; outline: 0px; padding: 0px; bottom: 1ex; color: rgb(153, 204, 0); font-family: Arial, Tahoma; font-stretch: normal; font-variant-numeric: normal; font-variant-east-asian: normal;">?</a></span></span><span style="box-sizing: inherit; border: 0px; font-size: 14px; margin: 0px 0px 0px 5px; outline: 0px; padding: 2px 5px 2px 20px; vertical-align: baseline; float: left; background: url(&quot;../images/view_code.png&quot;) left center no-repeat; color: rgb(0, 0, 0); font-family: tahoma, arial, verdana; font-weight: bold;"><span style="background-color: initial; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(217, 217, 217); border-image: initial; border-left-style: initial; border-left-color: initial; border-right-style: initial; border-right-color: initial; border-top-style: initial; border-top-color: initial; box-sizing: inherit; margin: 0px; outline: 0px; padding: 0px; transition-duration: 125ms; transition-timing-function: ease-out; transition-delay: initial; transition-property: all; vertical-align: baseline; color: rgb(16, 176, 184);">View Code</span>&nbsp;BASH</span></div><div style="box-sizing: inherit; border: 1px solid silver; font-size: 16px; margin: 0px 0px 0.5em; outline: 0px; padding: 0px; vertical-align: baseline; width: 611.516px; background-color: rgb(249, 249, 249); overflow: auto;"><div>&nbsp;<br></div><table style="box-sizing: inherit; font-size: 16px; outline: 0px; vertical-align: baseline; width: 609px;"><colgroup><col style="width: 609px;"></colgroup><tbody><tr style="box-sizing: inherit; outline: 0px; padding: 0px; vertical-align: baseline;"><td style="box-sizing: inherit; outline: 0px; vertical-align: top; border: 1px solid rgb(204, 204, 204);"><div style="box-sizing: inherit; border: none; font-size: 12px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; background: none; overflow: visible; max-width: 100%; overflow-wrap: normal; width: auto; float: none; clear: none;"><span style="box-sizing: inherit; border: 0px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(122, 8, 116); font-family: monospace; font-weight: bold;">echo</span> <span style="box-sizing: inherit; border: 0px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0); font-family: monospace;">1</span> <span style="box-sizing: inherit; border: 0px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0); font-family: monospace; font-weight: bold;">&gt;</span> <span style="box-sizing: inherit; border: 0px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0); font-family: monospace; font-weight: bold;">/</span><span style="color: rgb(17, 0, 0); font-family: monospace;">sys</span><span style="box-sizing: inherit; border: 0px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0); font-family: monospace; font-weight: bold;">/</span><span style="color: rgb(17, 0, 0); font-family: monospace;">block</span><span style="box-sizing: inherit; border: 0px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0); font-family: monospace; font-weight: bold;">/</span><span style="color: rgb(17, 0, 0); font-family: monospace;">sdd</span><span style="box-sizing: inherit; border: 0px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0); font-family: monospace; font-weight: bold;">/</span><span style="color: rgb(17, 0, 0); font-family: monospace;">device</span><span style="box-sizing: inherit; border: 0px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0); font-family: monospace; font-weight: bold;">/</span><span style="color: rgb(17, 0, 0); font-family: monospace;">delete</span></div></td></tr></tbody></table><div>&nbsp;<br></div></div><div style="box-sizing: inherit; border: 0px; font-size: 16px; margin: 0px 0px 24px; outline: 0px; padding: 0px; vertical-align: baseline;"><div>&nbsp;<br></div><div><span style="color: rgb(0, 0, 0); font-family: &quot;Playfair Display&quot;, serif;">Attention, bien entendu de supprimer le bon disque autant dans vmware que avec la commande ci-dessus, au risque d’avoir de drôles de surprises sur un système en production…</span></div><div>&nbsp;<br></div><div><span style="color: rgb(0, 0, 0); font-family: &quot;Playfair Display&quot;, serif; text-decoration-line: underline;">NOTE PERSO TIM :</span></div><div>&nbsp;<br></div><div><span style="color: rgb(0, 0, 0); font-family: &quot;Playfair Display&quot;, serif; text-decoration-line: line-through;">A la place de faire le delete préconisé ci-dessus, j'ai bien supprimé les disques dans VMware puis fait un rescan du device pour que l'OS voit qu'il n'est plus là :</span></div><div>&nbsp;<br></div><div style="padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);"><div><s>[root@centos2 ~]# echo 1 &gt; /sys/block/sdc/device/rescan</s></div><div><s># lsblk // pour vérifier</s></div></div><div>&nbsp;<br></div><div><span style="color: rgb(255, 0, 0); font-family: &quot;Playfair Display&quot;, serif;">Ne pas faire cette solution car si on souhaite ensuite rajouter un disque, l'info est toujours là que le disque existe donc le nouveau disque ne va pas apparaitre.</span></div><div>&nbsp;<br></div><div>Aussi, à savoir que lorsque j'ai supprimé le disque de VMware, je n'avais plus le device dans&nbsp;<span style="border: 0px; font-size: 12px; outline: 0px; color: rgb(0, 0, 0); font-family: monospace; font-weight: bold;">/</span><span style="font-size: 12px; color: rgb(17, 0, 0); font-family: monospace;">sys</span><span style="border: 0px; font-size: 12px; outline: 0px; color: rgb(0, 0, 0); font-family: monospace; font-weight: bold;">/</span><span style="font-size: 12px; color: rgb(17, 0, 0); font-family: monospace;">block/ (OS 6.5 et VMware 5.1).</span></div><div><span style="font-size: 12px;">&nbsp;<br></span></div><div><span style="font-size: 12px;">&nbsp;<br></span></div></div><div>&nbsp;<br></div>